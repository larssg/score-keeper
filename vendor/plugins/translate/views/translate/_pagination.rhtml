<% 
  # Expects locals:
  #
  # total_entries
  # per_page

  n_pages = total_entries/per_page + (total_entries % per_page > 0 ? 1 : 0)
  current_page = (params[:page] || 1).to_i
%>

<% if n_pages > 1 %>
<h2>Pages:</h2>
<div class="clearfix">
	<ul class="paging">
	  <% (1..n_pages).each do |page_number| %>
	    <% if current_page == page_number %>
	      <li class="selected"><%= link_to(page_number, params.merge(:page => page_number), :title => "Page #{page_number}" ) %></li>
	    <% else %>
	      <li><%= link_to(page_number, params.merge(:page => page_number), :title => "Page #{page_number}") %></li>
	    <% end %>
	  <% end %>
	</ul>
</div>
<% end %>